import{S as Sa,E as wa,o as Ca,a as Ea,r as c,B as Ia,d as co,j as s,F as z,D as Oa,u as Rt,b as kt,i as pe,e as lo,s as B,f as F,_ as Da,P as Ye,g as Re,h as Le,k as xt,l as Ke,m as W,n as Ma,p as I,q as Ta,t as Ra,v as uo,w as po,x as qe,y as ka,z as ja,A as ke,C as ge,G as Pt,H as Na,I as Aa,J as La,K as Fa,L as Ba,M as De,N as ho,O as fo,Q as za,R as jt,T as Nt,U as ve,V as Wa,W as Va,X as pn,Y as Ua,Z as Ha,$ as Ga,a0 as re,a1 as mo,a2 as M,a3 as T,a4 as be,a5 as ee,a6 as At,a7 as Lt,a8 as go,a9 as $a,aa as de,ab as Ya,ac as je,ad as Ft,ae as q,af as vo,ag as Me,ah as Ka,ai as Pe,aj as Xe,ak as qa,al as bo,am as Xa,an as Ja,ao as Qa,ap as Ne,aq as Za,ar as ie,as as we,at as er,au as Je,av as tr,aw as yo,ax as nr,ay as or,az as ar,aA as _o,aB as rr,aC as Bt,aD as hn,aE as ir,aF as zt,aG as sr,aH as St,aI as xo,aJ as cr,aK as lr,aL as ur,aM as dr,aN as pr,aO as hr,aP as fr,aQ as mr,aR as ue,aS as Qe,aT as Po,aU as Ze,aV as gr,aW as Wt,aX as Vt,aY as vr,aZ as br,a_ as yr,a$ as _r,b0 as xr,b1 as So,b2 as wo,b3 as Pr,b4 as Sr,b5 as wr,b6 as ce,b7 as Co,b8 as Cr,b9 as Eo,ba as wt,bb as Er,bc as Ir,bd as Or,be as Io,bf as Dr,bg as Mr,bh as Tr,bi as Oo,bj as Rr,bk as kr,bl as Do,bm as Ut,bn as jr,bo as ft,bp as Nr,bq as Ar,br as Lr,bs as fn,bt as Fr,bu as Br,bv as mt,bw as zr,bx as mn,by as Ct,bz as Mo,bA as Wr,bB as Vr,bC as Ur,bD as Hr,bE as Gr,bF as $r,bG as To,bH as Yr,bI as Ht,bJ as Kr,bK as qr,bL as Xr,bM as Jr,bN as Qr,bO as Zr,bP as ei,bQ as ti,bR as ni,bS as oi,bT as Et,bU as ai,bV as ri,bW as ii,bX as si,bY as ci,bZ as It,b_ as li,b$ as ui,c0 as di,c1 as gn,c2 as pi,c3 as hi,c4 as Ro,c5 as fi,c6 as mi,c7 as gi,c8 as vi,c9 as gt,ca as vn,cb as bi,cc as bn,cd as yi}from"./sanity-e8d7760d.js";function ko(t,e){var n=typeof e=="object";return new Promise(function(o,a){var r=new Sa({next:function(i){o(i),r.unsubscribe()},error:a,complete:function(){n?o(e.defaultValue):a(new wa)}});t.subscribe(r)})}function _i(){return Ca(function(t,e){var n,o=!1;t.subscribe(Ea(e,function(a){var r=n;n=a,o&&e.next([r,a]),o=!0}))})}function xi(t,e){var n=c.useCallback(function(){var i=new Ia(t),l=i.asObservable().pipe(co());return[e?l.pipe(e):l,i]},[]),o=c.useRef();o.current||(o.current=n());var a=o.current[0];c.useEffect(function(){if(o.current){var i=o.current,l=i[1];l.next(t)}},[t,o]);var r=c.useRef(!1);return c.useEffect(function(){return r.current&&(o.current||(o.current=n()),r.current=!1),function(){if(o.current){r.current=!0;var i=o.current,l=i[1];l.complete(),o.current=void 0}}},[]),a}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var yn=Object.getOwnPropertySymbols,Pi=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable;function wi(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ci(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(r){return e[r]});if(o.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ei=Ci()?Object.assign:function(t,e){for(var n,o=wi(t),a,r=1;r<arguments.length;r++){n=Object(arguments[r]);for(var i in n)Pi.call(n,i)&&(o[i]=n[i]);if(yn){a=yn(n);for(var l=0;l<a.length;l++)Si.call(n,a[l])&&(o[a[l]]=n[a[l]])}}return o},Fe=Ei,Ii={};function Z(t,e,n,o,a,r,i,l){if(!t){var u;if(e===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,a,r,i,l],p=0;u=new Error(e.replace(/%s/g,function(){return d[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var _n="mixins";function Oi(t,e,n){var o=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},r={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},i={displayName:function(v,f){v.displayName=f},mixins:function(v,f){if(f)for(var g=0;g<f.length;g++)u(v,f[g])},childContextTypes:function(v,f){v.childContextTypes=Fe({},v.childContextTypes,f)},contextTypes:function(v,f){v.contextTypes=Fe({},v.contextTypes,f)},getDefaultProps:function(v,f){v.getDefaultProps?v.getDefaultProps=h(v.getDefaultProps,f):v.getDefaultProps=f},propTypes:function(v,f){v.propTypes=Fe({},v.propTypes,f)},statics:function(v,f){d(v,f)},autobind:function(){}};function l(v,f){var g=a.hasOwnProperty(f)?a[f]:null;y.hasOwnProperty(f)&&Z(g==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",f),v&&Z(g==="DEFINE_MANY"||g==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",f)}function u(v,f){if(f){Z(typeof f!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),Z(!e(f),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var g=v.prototype,C=g.__reactAutoBindPairs;f.hasOwnProperty(_n)&&i.mixins(v,f.mixins);for(var S in f)if(f.hasOwnProperty(S)&&S!==_n){var O=f[S],D=g.hasOwnProperty(S);if(l(D,S),i.hasOwnProperty(S))i[S](v,O);else{var R=a.hasOwnProperty(S),k=typeof O=="function",j=k&&!R&&!D&&f.autobind!==!1;if(j)C.push(S,O),g[S]=O;else if(D){var N=a[S];Z(R&&(N==="DEFINE_MANY_MERGED"||N==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",N,S),N==="DEFINE_MANY_MERGED"?g[S]=h(g[S],O):N==="DEFINE_MANY"&&(g[S]=b(g[S],O))}else g[S]=O}}}}function d(v,f){if(f)for(var g in f){var C=f[g];if(f.hasOwnProperty(g)){var S=g in i;Z(!S,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',g);var O=g in v;if(O){var D=r.hasOwnProperty(g)?r[g]:null;Z(D==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",g),v[g]=h(v[g],C);return}v[g]=C}}}function p(v,f){Z(v&&f&&typeof v=="object"&&typeof f=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var g in f)f.hasOwnProperty(g)&&(Z(v[g]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",g),v[g]=f[g]);return v}function h(v,f){return function(){var C=v.apply(this,arguments),S=f.apply(this,arguments);if(C==null)return S;if(S==null)return C;var O={};return p(O,C),p(O,S),O}}function b(v,f){return function(){v.apply(this,arguments),f.apply(this,arguments)}}function m(v,f){var g=f.bind(v);return g}function x(v){for(var f=v.__reactAutoBindPairs,g=0;g<f.length;g+=2){var C=f[g],S=f[g+1];v[C]=m(v,S)}}var P={componentDidMount:function(){this.__isMounted=!0}},E={componentWillUnmount:function(){this.__isMounted=!1}},y={replaceState:function(v,f){this.updater.enqueueReplaceState(this,v,f)},isMounted:function(){return!!this.__isMounted}},_=function(){};Fe(_.prototype,t.prototype,y);function w(v){var f=function(C,S,O){this.__reactAutoBindPairs.length&&x(this),this.props=C,this.context=S,this.refs=Ii,this.updater=O||n,this.state=null;var D=this.getInitialState?this.getInitialState():null;Z(typeof D=="object"&&!Array.isArray(D),"%s.getInitialState(): must return an object or null",f.displayName||"ReactCompositeComponent"),this.state=D};f.prototype=new _,f.prototype.constructor=f,f.prototype.__reactAutoBindPairs=[],o.forEach(u.bind(null,f)),u(f,P),u(f,v),u(f,E),f.getDefaultProps&&(f.defaultProps=f.getDefaultProps()),Z(f.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var g in a)f.prototype[g]||(f.prototype[g]=null);return f}return w}var Di=Oi,He=c,Mi=Di;if(typeof He>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var Ti=new He.Component().updater,et=Mi(He.Component,He.isValidElement,Ti),Ri=Date.now||ki;function ki(){return new Date().getTime()}var xn=Ri,ji=function(e,n,o){var a,r,i,l,u;n==null&&(n=100);function d(){var p=xn()-l;p<n&&p>0?a=setTimeout(d,n-p):(a=null,o||(u=e.apply(i,r),a||(i=r=null)))}return function(){i=this,r=arguments,l=xn();var h=o&&!a;return a||(a=setTimeout(d,n)),h&&(u=e.apply(i,r),i=r=null),u}},Ni=Ai;function Ai(t){for(var e=Li(t),n=1732584193,o=-271733879,a=-1732584194,r=271733878,i=0;i<e.length;i+=16){var l=n,u=o,d=a,p=r;n=G(n,o,a,r,e[i+0],7,-680876936),r=G(r,n,o,a,e[i+1],12,-389564586),a=G(a,r,n,o,e[i+2],17,606105819),o=G(o,a,r,n,e[i+3],22,-1044525330),n=G(n,o,a,r,e[i+4],7,-176418897),r=G(r,n,o,a,e[i+5],12,1200080426),a=G(a,r,n,o,e[i+6],17,-1473231341),o=G(o,a,r,n,e[i+7],22,-45705983),n=G(n,o,a,r,e[i+8],7,1770035416),r=G(r,n,o,a,e[i+9],12,-1958414417),a=G(a,r,n,o,e[i+10],17,-42063),o=G(o,a,r,n,e[i+11],22,-1990404162),n=G(n,o,a,r,e[i+12],7,1804603682),r=G(r,n,o,a,e[i+13],12,-40341101),a=G(a,r,n,o,e[i+14],17,-1502002290),o=G(o,a,r,n,e[i+15],22,1236535329),n=$(n,o,a,r,e[i+1],5,-165796510),r=$(r,n,o,a,e[i+6],9,-1069501632),a=$(a,r,n,o,e[i+11],14,643717713),o=$(o,a,r,n,e[i+0],20,-373897302),n=$(n,o,a,r,e[i+5],5,-701558691),r=$(r,n,o,a,e[i+10],9,38016083),a=$(a,r,n,o,e[i+15],14,-660478335),o=$(o,a,r,n,e[i+4],20,-405537848),n=$(n,o,a,r,e[i+9],5,568446438),r=$(r,n,o,a,e[i+14],9,-1019803690),a=$(a,r,n,o,e[i+3],14,-187363961),o=$(o,a,r,n,e[i+8],20,1163531501),n=$(n,o,a,r,e[i+13],5,-1444681467),r=$(r,n,o,a,e[i+2],9,-51403784),a=$(a,r,n,o,e[i+7],14,1735328473),o=$(o,a,r,n,e[i+12],20,-1926607734),n=Y(n,o,a,r,e[i+5],4,-378558),r=Y(r,n,o,a,e[i+8],11,-2022574463),a=Y(a,r,n,o,e[i+11],16,1839030562),o=Y(o,a,r,n,e[i+14],23,-35309556),n=Y(n,o,a,r,e[i+1],4,-1530992060),r=Y(r,n,o,a,e[i+4],11,1272893353),a=Y(a,r,n,o,e[i+7],16,-155497632),o=Y(o,a,r,n,e[i+10],23,-1094730640),n=Y(n,o,a,r,e[i+13],4,681279174),r=Y(r,n,o,a,e[i+0],11,-358537222),a=Y(a,r,n,o,e[i+3],16,-722521979),o=Y(o,a,r,n,e[i+6],23,76029189),n=Y(n,o,a,r,e[i+9],4,-640364487),r=Y(r,n,o,a,e[i+12],11,-421815835),a=Y(a,r,n,o,e[i+15],16,530742520),o=Y(o,a,r,n,e[i+2],23,-995338651),n=K(n,o,a,r,e[i+0],6,-198630844),r=K(r,n,o,a,e[i+7],10,1126891415),a=K(a,r,n,o,e[i+14],15,-1416354905),o=K(o,a,r,n,e[i+5],21,-57434055),n=K(n,o,a,r,e[i+12],6,1700485571),r=K(r,n,o,a,e[i+3],10,-1894986606),a=K(a,r,n,o,e[i+10],15,-1051523),o=K(o,a,r,n,e[i+1],21,-2054922799),n=K(n,o,a,r,e[i+8],6,1873313359),r=K(r,n,o,a,e[i+15],10,-30611744),a=K(a,r,n,o,e[i+6],15,-1560198380),o=K(o,a,r,n,e[i+13],21,1309151649),n=K(n,o,a,r,e[i+4],6,-145523070),r=K(r,n,o,a,e[i+11],10,-1120210379),a=K(a,r,n,o,e[i+2],15,718787259),o=K(o,a,r,n,e[i+9],21,-343485551),n=se(n,l),o=se(o,u),a=se(a,d),r=se(r,p)}return Be(n)+Be(o)+Be(a)+Be(r)}var Pn="0123456789abcdef";function Gt(t,e){var n=t&1|e&1,o=t>>>1|e>>>1;return o<<1|n}function Ot(t,e){var n=t&1^e&1,o=t>>>1^e>>>1;return o<<1|n}function Ge(t,e){var n=t&1&(e&1),o=t>>>1&e>>>1;return o<<1|n}function se(t,e){var n=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(n>>16);return o<<16|n&65535}function Be(t){var e="",n;for(n=0;n<=3;n++)e+=Pn.charAt(t>>n*8+4&15)+Pn.charAt(t>>n*8&15);return e}function Li(t){var e=(t.length+8>>6)+1,n=new Array(e*16),o;for(o=0;o<e*16;o++)n[o]=0;for(o=0;o<t.length;o++)n[o>>2]|=t.charCodeAt(o)<<(t.length*8+o)%4*8;n[o>>2]|=128<<(t.length*8+o)%4*8;var a=t.length*8;return n[e*16-2]=a&255,n[e*16-2]|=(a>>>8&255)<<8,n[e*16-2]|=(a>>>16&255)<<16,n[e*16-2]|=(a>>>24&255)<<24,n}function Fi(t,e){return t<<e|t>>>32-e}function tt(t,e,n,o,a,r){return se(Fi(se(se(e,t),se(o,r)),a),n)}function G(t,e,n,o,a,r,i){return tt(Gt(Ge(e,n),Ge(~e,o)),t,e,a,r,i)}function $(t,e,n,o,a,r,i){return tt(Gt(Ge(e,o),Ge(n,~o)),t,e,a,r,i)}function Y(t,e,n,o,a,r,i){return tt(Ot(Ot(e,n),o),t,e,a,r,i)}function K(t,e,n,o,a,r,i){return tt(Ot(n,Gt(e,~o)),t,e,a,r,i)}var Bi=Math.ceil(Math.random()*10),zi=function(){return++Bi},$t=function(t){return Object.prototype.toString.call(t).slice(8,-1)},Wi=$t;function Vi(t){var e=Wi(t);return e!=="Object"&&e!=="Array"}var jo=Vi,Ui=c,Hi=et,ze=Ui.createElement,Gi=Hi({getDefaultProps:function(){return{string:"",highlight:""}},shouldComponentUpdate:function(t){return t.highlight!==this.props.highlight},render:function(){var t=this.props,e=t.string.search(t.highlight);if(!t.highlight||e===-1)return ze("span",null,t.string);var n=t.highlight.source.length,o=t.string.substr(e,n);return ze("span",null,t.string.split(t.highlight).map(function(a,r){return ze("span",{key:r},r>0?ze("span",{className:"json-inspector__hl"},o):null,a)}))}}),$i=c,Yi=et,Ki=Ni,qi=zi,No=$t,We=jo,Xi=Gi,Q=$i.createElement,Ji=".root.",Ao=Yi({getInitialState:function(){return{expanded:this._isInitiallyExpanded(this.props)}},getDefaultProps:function(){return{root:!1,prefix:""}},render:function(){var t="id_"+qi(),e=this.props,n={path:this.keypath(),key:e.label.toString(),value:e.data},o=this._onClick.bind(this,n);return Q("div",{className:this.getClassName(),id:"leaf-"+this._rootPath()},Q("input",{className:"json-inspector__radio",type:"radio",name:e.id,id:t,tabIndex:-1}),Q("label",{className:"json-inspector__line",htmlFor:t,onClick:o},Q("div",{className:"json-inspector__flatpath"},n.path),Q("span",{className:"json-inspector__key"},this.format(n.key),":",this.renderInteractiveLabel(n.key,!0)),this.renderTitle(),this.renderShowOriginalButton()),this.renderChildren())},renderTitle:function(){var t=this.data(),e=No(t);switch(e){case"Array":var n=t.length;return Q("span",{className:"json-inspector__value json-inspector__value_helper"},(n>0?"[…] ":"[] ")+Qi(n));case"Object":var o=Object.keys(t).length;return Q("span",{className:"json-inspector__value json-inspector__value_helper"},(o>0?"{…} ":"{} ")+Zi(o));default:return Q("span",{className:"json-inspector__value json-inspector__value_"+e.toLowerCase()},this.format(String(t)),this.renderInteractiveLabel(t,!1))}},renderChildren:function(){var t=this.props,e=this._rootPath(),n=this.data();return this.state.expanded&&!We(n)?Object.keys(n).map(function(o){var a=n[o],r=!this.state.original||(t.verboseShowOriginal?t.query:!1);return Q(Ao,{data:a,label:o,prefix:e,onClick:t.onClick,id:t.id,query:t.query,getOriginal:r?t.getOriginal:null,key:es(o,a),isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal})},this):null},renderShowOriginalButton:function(){var t=this.props;return We(t.data)||this.state.original||!t.getOriginal||!t.query||vt(this.keypath(),t.query)?null:Q("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})},renderInteractiveLabel:function(t,e){return typeof this.props.interactiveLabel=="function"?Q(this.props.interactiveLabel,{value:String(t),originalValue:t,isKey:e,keypath:this.keypath()}):null},componentWillReceiveProps:function(t){t.query&&this.setState({expanded:!vt(t.label,t.query)}),this.props.query&&!t.query&&this.setState({expanded:this._isInitiallyExpanded(t)})},_rootPath:function(){return this.props.prefix+"."+this.props.label},keypath:function(){return this._rootPath().substr(Ji.length)},data:function(){return this.state.original||this.props.data},format:function(t){return Q(Xi,{string:t,highlight:this.props.query})},getClassName:function(){var t="json-inspector__leaf";return this.props.root&&(t+=" json-inspector__leaf_root"),this.state.expanded&&(t+=" json-inspector__leaf_expanded"),We(this.props.data)||(t+=" json-inspector__leaf_composite"),t},toggle:function(){this.setState({expanded:!this.state.expanded})},_onClick:function(t,e){this.toggle(),this.props.onClick(t),e.stopPropagation()},_onShowOriginalClick:function(t){this.setState({original:this.props.getOriginal(this.keypath())}),t.stopPropagation()},_isInitiallyExpanded:function(t){var e=this.keypath();return t.root?!0:t.query?!vt(e,t.query)&&typeof t.getOriginal=="function":t.isExpanded(e,t.data)}});function Qi(t){return t+(t===1?" item":" items")}function Zi(t){return t+(t===1?" property":" properties")}function es(t,e){if(We(e)){var n=Ki(String(e));return t+":"+n}else return t+"["+No(e)+"]"}function vt(t,e){return t.indexOf(e)!==-1}var ts=Ao,Lo=function(){},ns=c,os=et,as=ns.createElement,rs=Lo,is=os({getDefaultProps:function(){return{onChange:rs}},render:function(){return as("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:this.onChange})},onChange:function(t){this.props.onChange(t.target.value)}}),Fo=function(t){return Object.keys(t).length===0},ss=Object.keys,cs=jo,ls=Fo,us=function(t,e){e||(e={cacheResults:!0});var n={};return function(o){if(!e.cacheResults)return Ve(t,o,e);var a;if(!n[o]){for(var r=o.length-1;r>0;r-=1)if(a=o.substr(0,r),n[a]){n[o]=Ve(n[a],o,e);break}}return n[o]||(n[o]=Ve(t,o,e)),n[o]}};function Ve(t,e,n){return ss(t).reduce(function(o,a){var r=t[a],i;return cs(r)?(bt(e,a,n)||bt(e,r,n))&&(o[a]=r):bt(e,a,n)?o[a]=r:(i=Ve(r,e,n),ls(i)||Object.assign(o,ds(a,i))),o},{})}function bt(t,e,n){if(e){var o=String(e),a=t;return n.ignoreCase&&(o=o.toLowerCase(),a=a.toLowerCase()),o.indexOf(a)!==-1}}function ds(t,e){var n={};return n[t]=e,n}var ps=$t,yt=".";function Dt(t,e){var n=e.split(yt),o=n.shift();if(!o)return t;var a=ps(t);if(a==="Array"&&t[Sn(o)])return Dt(t[Sn(o)],n.join(yt));if(a==="Object"&&t[o])return Dt(t[o],n.join(yt))}function Sn(t){return parseInt(t,10)}var hs=Dt,fs=c,ms=et,gs=ji,Oe=fs.createElement,vs=ts,bs=is,ys=us,_s=Fo,xs=hs,Ps=Lo,Ss=ms({getDefaultProps:function(){return{data:null,search:bs,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:Ps,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(t){return t.length>=2},isExpanded:function(t,e){return!1},verboseShowOriginal:!1}},getInitialState:function(){return{query:this.props.query||""}},render:function(){var t=this.props,e=this.state,n=e.query!==""&&t.validateQuery(e.query),o=n?e.filterer(e.query):t.data,a=n&&_s(o);return Oe("div",{className:"json-inspector "+t.className},this.renderToolbar(),a?Oe("div",{className:"json-inspector__not-found"},"Nothing found"):Oe(vs,{data:o,onClick:t.onClick,id:t.id,getOriginal:this.getOriginal,query:n?new RegExp(e.query,t.filterOptions.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal}))},renderToolbar:function(){var t=this.props.search;if(t)return Oe("div",{className:"json-inspector__toolbar"},Oe(t,{onChange:gs(this.search,this.props.searchOptions.debounceTime),data:this.props.data,query:this.state.query}))},search:function(t){this.setState({query:t})},componentWillMount:function(){this.createFilterer(this.props.data,this.props.filterOptions)},componentWillReceiveProps:function(t){this.createFilterer(t.data,t.filterOptions);var e=typeof t.query=="string"&&t.query!==this.state.query;e&&this.setState({query:t.query})},shouldComponentUpdate:function(t,e){return t.query!==this.props.query||e.query!==this.state.query||t.data!==this.props.data||t.onClick!==this.props.onClick},createFilterer:function(t,e){this.setState({filterer:ys(t,e)})},getOriginal:function(t){return xs(this.props.data,t)}}),ws=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),o=Object.create(null);function a(r,i){n[r]=i,e++,e>=t&&(e=0,o=n,n=Object.create(null))}return{has:function(r){return n[r]!==void 0||o[r]!==void 0},remove:function(r){n[r]!==void 0&&(n[r]=void 0),o[r]!==void 0&&(o[r]=void 0)},get:function(r){var i=n[r];if(i!==void 0)return i;if((i=o[r])!==void 0)return a(r,i),i},set:function(r,i){n[r]!==void 0?n[r]=i:a(r,i)},clear:function(){n=Object.create(null),o=Object.create(null)}}},wn,Cn,En,In,On,Dn,Mn,Tn,Rn,kn,jn,Nn,An,Ln,Fn,Bn,zn,Wn,Vn,Un,Hn,Gn,$n,Yn,Kn,qn,Xn,Jn;function L(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Cs(t){let{children:e,ms:n=0}=t;const[o,a]=c.useState(n<=0);return c.useEffect(()=>{if(n<=0)return;const r=setTimeout(()=>a(!0),n);return()=>{clearTimeout(r)}},[n]),!o||!e?s(z,{}):typeof e=="function"?e():e}const Yt=t=>{const{actions:e,children:n,actionProps:o,onActionComplete:a}=t;return s(xo,{onReset:a,hooks:e,args:o,children:n})},Es=t=>{const{badges:e,children:n,badgeProps:o,...a}=t;return s(xo,{...a,hooks:e,args:o,children:n})},Is=[];function Os(t){const{children:e,flatIndex:n,index:o,params:a,payload:r,siblingIndex:i}=t,{navigate:l,navigateIntent:u}=Rt(),d=kt(),p=c.useMemo(()=>(d==null?void 0:d.panes)||Is,[d==null?void 0:d.panes]),h=o-1,b=c.useCallback(y=>{const _=p[h]||[],w=_[i],v=y(_,w),f=[...p.slice(0,h),v,...p.slice(h+1)],g={...d||{},panes:f};return setTimeout(()=>l(g),0),g},[h,l,p,d,i]),m=c.useCallback(y=>{b((_,w)=>[..._.slice(0,i),{...w,payload:y},..._.slice(i+1)])},[b,i]),x=c.useCallback(y=>{b((_,w)=>[..._.slice(0,i),{...w,params:y},..._.slice(i+1)])},[b,i]),P=c.useCallback(y=>{let{id:_,parentRefPath:w,type:v,template:f}=y;l({panes:[...p.slice(0,h+1),[{id:_,params:{template:f.id,parentRefPath:cr(w),type:v},payload:f.params}]]})},[h,l,p]),E=c.useMemo(()=>({index:n,groupIndex:h,siblingIndex:i,payload:r,params:a,hasGroupSiblings:p[h]?p[h].length>1:!1,groupLength:p[h]?p[h].length:0,routerPanesState:p,ChildLink:lr,BackLink:ur,ReferenceChildLink:dr,handleEditReference:P,ParameterizedLink:pr,replaceCurrent:function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(()=>[{id:y.id||"",payload:y.payload,params:y.params||{}}])},closeCurrent:()=>{b((y,_)=>y.length>1?y.filter(w=>w!==_):y)},duplicateCurrent:y=>{b((_,w)=>{const v={...w,payload:(y==null?void 0:y.payload)||w.payload,params:(y==null?void 0:y.params)||w.params};return[..._.slice(0,i),v,..._.slice(i)]})},setView:y=>{const _=jt(a,"view");return x(y?{..._,view:y}:_)},setParams:x,setPayload:m,navigateIntent:u}),[n,h,P,b,u,a,r,p,x,m,i]);return s(hr.Provider,{value:E,children:e})}function Ds(t,e,n,o){var a,r;const i={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},l=(a=e.minWidth)!=null?a:It,u=(r=n.minWidth)!=null?r:It,d=Math.min(e.maxWidth||1/0,i.width-u),p=Math.min(n.maxWidth||1/0,i.width-l);let h=l-t.left.width;const b=t.right.width-p;h<b&&(h=b);let m=t.right.width-u;const x=d-t.left.width;m>x&&(m=x);const P=Math.min(Math.max(o,h),m),E=t.left.width+P,y=t.right.width-P,_=E/i.width*i.flex,w=y/i.width*i.flex;return{leftFlex:_,leftW:E,rightFlex:w,rightW:y}}function Ms(t,e){const n=[];let o=e;for(;o!==t;){const a=o.parentElement;if(!a)return n;const i=Array.from(a.childNodes).indexOf(o);if(n.unshift(i),a===t)return n;o=a}return n}const Qn=[];function Ts(t,e){const n=new WeakMap;for(const a of e)n.set(a,Ms(t,a));const o=(a,r)=>{const i=n.get(a)||Qn,l=n.get(r)||Qn,u=Math.max(i.length,l.length);for(let d=0;d<u;d+=1){const p=i[d]||-1,h=l[d]||-1;if(p!==h)return p-h}return 0};e.sort(o)}function Rs(){const t=[],e=[],n=new WeakMap,o=new Set,a={};let r=null,i=0,l=null,u=new Map,d=!1;function p(_){o.add(_),l===_&&(l=null),y()}function h(_){o.delete(_),l=_,y()}function b(_,w){return n.set(_,{...w,original:w}),e.push(_),r&&Ts(r,e),h(_),()=>{const v=e.indexOf(_);v>-1&&e.splice(v,1),n.delete(_),y()}}function m(_,w,v){var f,g,C,S;const O=e.indexOf(w),D=n.get(w);if(!D)return;const R=e[O+1],k=n.get(R);if(k){if(_==="start"&&(d=!0,a.left={element:w,flex:D.flex||1,width:w.offsetWidth},a.right={element:R,flex:k.flex||1,width:R.offsetWidth},y()),_==="move"&&a.left&&a.right){u=new Map;const{leftW:j,rightW:N,leftFlex:X,rightFlex:le}=Ds(a,D,k,v);u.set(w,{flex:X,width:j}),u.set(R,{flex:le,width:N}),y()}if(_==="end"){d=!1;const j=u.get(w),N=u.get(R);n.set(w,{...D,currentMinWidth:0,currentMaxWidth:(f=D.maxWidth)!=null?f:1/0,flex:(g=j==null?void 0:j.flex)!=null?g:D.flex}),n.set(R,{...k,currentMinWidth:0,currentMaxWidth:(C=D.maxWidth)!=null?C:1/0,flex:(S=N==null?void 0:N.flex)!=null?S:k.flex}),u=new Map,delete a.left,delete a.right,y()}}}function x(_){r=_}function P(_){i=_,y()}function E(_){return t.push(_),()=>{const w=t.push(_);w>-1&&t.splice(w,1)}}return{collapse:p,expand:h,mount:b,resize:m,setRootElement:x,setRootWidth:P,subscribe:E};function y(){var _,w,v,f;if(!i)return;const g=[];for(const j of e)j!==l&&g.unshift(j);l&&g.unshift(l);const C=new WeakMap,S=g.length,O=g[0],D=(S-1)*gt;let R=i-D;for(const j of g){const N=n.get(j);if(!N)continue;const X=N.currentMinWidth||N.minWidth||It,le=j===O,ne=o.has(j),te=X>R,U=le?!1:ne||te,oe=u.get(j);C.set(j,{element:j,collapsed:U,currentMinWidth:(_=oe==null?void 0:oe.width)!=null?_:N.currentMinWidth,currentMaxWidth:(w=oe==null?void 0:oe.width)!=null?w:N.currentMaxWidth,flex:(f=(v=oe==null?void 0:oe.flex)!=null?v:N.flex)!=null?f:1}),U?R-=gt:R-=X-gt}const k=[];for(const j of e){const N=C.get(j);N&&k.push(N)}for(const j of t)j({expandedElement:l||e[e.length-1]||null,panes:k,resizing:d})}}function ks(t){const{children:e,minWidth:n,onCollapse:o,onExpand:a,...r}=t,i=c.useMemo(()=>Rs(),[]),[l,u]=c.useState(null),d=Je(l),p=(d==null?void 0:d.width)||0,h=p===void 0||!n?void 0:p<n,[b,m]=c.useState({expandedElement:null,panes:[],resizing:!1});c.useEffect(()=>i.setRootElement(l),[i,l]),c.useEffect(()=>i.setRootWidth(p),[i,p]),c.useEffect(()=>i.subscribe(m),[i]),c.useEffect(()=>{h!==void 0&&(h&&o&&o(),!h&&a&&a())},[h,o,a]);const x=c.useMemo(()=>({collapse:i.collapse,collapsed:h,expand:i.expand,expandedElement:b.expandedElement,mount:i.mount,panes:b.panes,resize:i.resize,resizing:b.resizing}),[h,i,b.expandedElement,b.panes,b.resizing]);return s(fr.Provider,{value:x,children:s(mr,{"data-ui":"PaneLayout",...r,"data-collapsed":h?"":void 0,"data-resizing":b.resizing?"":void 0,"data-mounted":p?"":void 0,ref:u,children:e})})}class Se extends Error{constructor(e){let{message:n,context:o,helpId:a,cause:r}=e;super(n),this.context=o,this.helpId=a,this.cause=r}}const Zn=new WeakMap;function nt(t){const e=Zn.get(t);if(e)return e;const n=mi();return Zn.set(t,n),n}const eo=new WeakMap;function Bo(t,e){const n=eo.get(t)||new Map;if(n){const r=n.get(e);if(r)return r}const o=t[e];if(typeof o!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof o," instead."));const a=o.bind(t);return n.set(e,a),eo.set(t,n),a}const js=t=>!!t&&typeof(t==null?void 0:t.then)=="function",Ns=t=>pe(t)?typeof t.serialize=="function":!1,As=t=>(e,n,o)=>{try{return t(e,n,o)}catch(a){throw a instanceof Se?a:new Se({message:typeof(a==null?void 0:a.message)=="string"?a.message:"",context:n,cause:a})}},Ls=t=>function(){return t(...arguments).pipe(gi(1),vi())};function zo(t){const e=As(Ls(t((n,o,a)=>{if(!n)throw new Se({message:"Pane returned no child",context:o,helpId:"structure-item-returned-no-child"});return js(n)||li(n)?To(n).pipe(Ze(r=>e(r,o,a))):Ns(n)?e(n.serialize(o),o,a):typeof n=="function"?e(n(o.id,o),o,a):ce(n)})));return e}async function Fs(t){const e=new Map,o=zo(u=>(d,p,h)=>{const b=d&&"".concat(nt(d),"-").concat(p.path.join("__")),m=b&&e.get(b);if(m)return m;const x=u(d,p,h);return b&&e.set(b,x),x}),a=[[{id:"__edit__".concat(t.params.id),params:{...jt(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function r(u){let{currentId:d,flatIndex:p,intent:h,params:b,parent:m,path:x,payload:P,unresolvedPane:E,levelIndex:y,structureContext:_}=u;var w;if(!E)return[];const{id:v,type:f,...g}=b,S=await ko(o(E,{id:d,splitIndex:0,parent:m,path:x,index:p,params:{},payload:void 0,structureContext:_},p));return S.type==="document"&&S.id===v?[{panes:[...x.slice(0,x.length-1).map(O=>[{id:O}]),[{id:v,params:g,payload:P}]],depthIndex:x.length,levelIndex:y}]:(w=S.canHandleIntent)!=null&&w.call(S,h,b,{pane:S,index:p})||S.type==="documentList"&&S.schemaTypeName===f&&S.options.filter==="_type == $type"?[{panes:[...x.map(O=>[{id:O}]),[{id:b.id,params:g,payload:P}]],depthIndex:x.length,levelIndex:y}]:S.type==="list"&&S.child&&S.items?(await Promise.all(S.items.map((O,D)=>O.type==="divider"?Promise.resolve([]):r({currentId:O._id||O.id,flatIndex:p+1,intent:h,params:b,parent:S,path:[...x,O.id],payload:P,unresolvedPane:typeof S.child=="function"?Bo(S,"child"):S.child,levelIndex:D,structureContext:_})))).flat():[]}const l=(await r({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((u,d)=>u.depthIndex===d.depthIndex?u.levelIndex-d.levelIndex:u.depthIndex-d.depthIndex)[0];return l?l.panes:a}function he(){const t=c.useContext(Oa);if(!t)throw new Error("DeskTool: missing context value");return t}const Bs=(t,e)=>{const n=t.replace(/^__edit__/,""),{params:o,payload:a,structureContext:{resolveDocumentNode:r}}=e,{type:i,template:l}=o;if(!i)throw new Error("Document type for document with ID ".concat(n," was not provided in the router params."));let u=r({schemaType:i,documentId:n});return u=u.id("editor").title("Editor"),l&&(u=u.initialValueTemplate(l,a)),u.serialize()};function zs(t){var e,n;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&nt(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(n=t.serializeOptions)==null?void 0:n.path}),")")}const to=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?nt(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function Ue(t){let{unresolvedPane:e,flattenedRouterPanes:n,parent:o,path:a,resolvePane:r,structureContext:i}=t;const[l,...u]=n,d=u[0],p={id:l.routerPaneSibling.id,splitIndex:l.siblingIndex,parent:o,path:[...a,l.routerPaneSibling.id],index:l.flatIndex,params:l.routerPaneSibling.params||{},payload:l.routerPaneSibling.payload,structureContext:i};try{return r(e,p,l.flatIndex).pipe(Ze(h=>{const b={type:"resolvedMeta",...l,paneNode:h,path:p.path},m=u.map((P,E)=>({type:"loading",path:[...p.path,...u.slice(E).map((w,v)=>"[".concat(P.flatIndex+v,"]"))],paneNode:null,...P}));if(!u.length)return ce([b]);let x;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?x=Ue({unresolvedPane:Bs,flattenedRouterPanes:u,parent:o,path:p.path,resolvePane:r,structureContext:i}):l.groupIndex===(d==null?void 0:d.groupIndex)?x=Ue({unresolvedPane:e,flattenedRouterPanes:u,parent:o,path:a,resolvePane:r,structureContext:i}):x=Ue({unresolvedPane:typeof h.child=="function"?Bo(h,"child"):h.child,flattenedRouterPanes:u,parent:h,path:p.path,resolvePane:r,structureContext:i}),Co(ce([b,...m]),x.pipe(ue(P=>[b,...P])))}))}catch(h){if(h instanceof Se&&(h.context&&console.warn("Pane resolution error at index ".concat(h.context.index).concat(h.context.splitIndex>0?" for split pane index ".concat(h.context.splitIndex):"",": ").concat(h.message).concat(h.helpId?" - see ".concat(Mo(h.helpId)):""),h),h.helpId==="structure-item-returned-no-child"))return ce([]);throw h}}function Ws(t){let{routerPanesStream:e,rootPaneNode:n,initialCacheState:o={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>ui},structureContext:a}=t;return e.pipe(ue(i=>[[{id:"root"}],...i]),ue(i=>i.flatMap((u,d)=>u.map((p,h)=>({routerPaneSibling:p,groupIndex:d,siblingIndex:h}))).map((u,d)=>({...u,flatIndex:d}))),Lr([]),_i(),ue(i=>{let[l,u]=i;for(let d=0;d<u.length;d++){const p=l[d],h=u[d];if(!xt(p,h))return{flattenedRouterPanes:u,diffIndex:d}}return{flattenedRouterPanes:u,diffIndex:u.length}}),fn((i,l)=>{const{cacheKeysByFlatIndex:u,resolvedPaneCache:d}=i,{flattenedRouterPanes:p,diffIndex:h}=l,b=u.slice(0,h+1),m=u.slice(h+1),x=new Set(b.flatMap(y=>Array.from(y))),P=m.flatMap(y=>Array.from(y)).filter(y=>!x.has(y));for(const y of P)d.delete(y);return{flattenedRouterPanes:p,cacheKeysByFlatIndex:u,resolvedPaneCache:d,resolvePane:zo(y=>(_,w,v)=>{const f=_&&"".concat(nt(_),"-").concat(zs(w)),g=f&&d.get(f);if(g)return g;const C=y(_,w,v);if(!f)return C;const S=u[v]||new Set;return S.add(f),u[v]=S,d.set(f,C),C})}},o),Ze(i=>{let{flattenedRouterPanes:l,resolvePane:u}=i;return Ue({unresolvedPane:n,flattenedRouterPanes:l,parent:null,path:[],resolvePane:u,structureContext:a})})).pipe(fn((i,l)=>l.map((u,d)=>{const p=i[d];return!p||u.type!=="loading"?u:p.routerPaneSibling.id===u.routerPaneSibling.id?p:u}),[]),co((i,l)=>{if(i.length!==l.length)return!1;for(let u=0;u<l.length;u++){const d=i[u],p=l[u];if(to(d)!==to(p))return!1}return!0}))}function Vs(){const t=c.useMemo(()=>new Fr(1),[]),e=c.useMemo(()=>t.asObservable().pipe(ue(o=>(o==null?void 0:o.panes)||[])),[t]),{state:n}=Rt();return c.useEffect(()=>{t.next(n)},[n,t]),e}function Us(){const[t,e]=c.useState();if(t)throw t;const{structureContext:n,rootPaneNode:o}=he(),[a,r]=c.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),i=Vs();return c.useEffect(()=>{const u=Ws({rootPaneNode:o,routerPanesStream:i,structureContext:n}).pipe(ue(d=>{const p=d.reduce((m,x)=>{const P=m[x.groupIndex]||[];return P[x.siblingIndex]=x.routerPaneSibling,m[x.groupIndex]=P,m},[]),h=p.length,b=d.map(m=>{var x;const{groupIndex:P,flatIndex:E,siblingIndex:y,routerPaneSibling:_,path:w}=m,v=_.id,f=p[P+1];return{active:P===h-2,childItemId:(x=f==null?void 0:f[0].id)!=null?x:null,index:E,itemId:_.id,groupIndex:P,key:"".concat(m.type==="loading"?"unknown":m.paneNode.id,"-").concat(v,"-").concat(y),pane:m.type==="loading"?St:m.paneNode,params:_.params||{},path:w.join(";"),payload:_.payload,selected:E===d.length-1,siblingIndex:y}});return{paneDataItems:b,routerPanes:p,resolvedPanes:b.map(m=>m.pane)}})).subscribe({next:d=>r(d),error:d=>e(d)});return()=>u.unsubscribe()},[o,i,n]),a}async function Hs(t,e,n){if(e&&n)return{id:e,type:n};if(!e&&n)return{id:Br(),type:n};if(e&&!n){const o=await ko(t.resolveTypeForDocument(e));return{id:e,type:o}}throw new Se({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const Gs={},$s=c.memo(function(){const{navigate:e}=Rt(),n=kt(c.useCallback(u=>{const d=typeof u.intent=="string"?u.intent:void 0;return d?{intent:d,params:pe(u.params)?u.params:Gs,payload:u.payload}:void 0},[])),{rootPaneNode:o,structureContext:a}=he(),r=lo(),[i,l]=c.useState(null);if(i)throw i;return c.useEffect(()=>{if(n){const{intent:u,params:d,payload:p}=n;let h=!1;async function b(){const{id:m,type:x}=await Hs(r,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(h)return;const P=await Fs({intent:u,params:{...d,id:m,type:x},payload:p,rootPaneNode:o,structureContext:a});h||e({panes:P},{replace:!0})}return b().catch(l),()=>{h=!0}}},[r,n,e,o,a]),null}),Ys=B.span(wn||(wn=L([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function Ks(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function qs(t){let{error:e}=t;if(!(e instanceof Se))throw e;const{cause:n}=e,o=(n==null?void 0:n.stack)||e.stack,a=o&&!(n instanceof mt)&&!e.message.includes("Module build failed:"),r=n instanceof mt?n.path:[],i=n instanceof mt&&n.helpId||e.helpId,l=c.useCallback(()=>{window.location.reload()},[]);return s(de,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:I(je,{children:[s(zr,{as:"h2",children:"Encountered an error while reading structure"}),I(de,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[r.length>0&&I(ee,{space:2,children:[s(mn,{children:"Structure path"}),s(Ct,{children:r.slice(1).map((u,d)=>s(Ys,{children:u},"".concat(u,"-").concat(d)))})]}),I(ee,{marginTop:4,space:2,children:[s(mn,{children:"Error"}),s(Ct,{children:a?Ks(o):e.message})]}),i&&s(M,{marginTop:4,children:s(T,{children:s("a",{href:Mo(i),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),s(M,{marginTop:4,children:s(q,{text:"Reload",icon:vo,tone:"primary",onClick:l})})]})]})})}function Xs(t){const{isSelected:e,pane:n,paneKey:o}=t,a=pe(n)&&n.type||null;return I(Ye,{id:o,selected:e,children:[s(Xe,{title:"Unknown pane type"}),s(Re,{children:s(M,{padding:4,children:typeof a=="string"?I(T,{as:"p",muted:!0,children:["Structure item of type ",s("code",{children:a})," is not a known entity."]}):I(T,{as:"p",muted:!0,children:["Structure item is missing required ",s("code",{children:"type"})," property."]})})})]})}function Js(t){const e=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],n=ce(null);return Wr(...e.map(o=>{let{ms:a,message:r}=o;return n.pipe(Vr(r),Ur(a))}))}const Qs="Loading…",Zs=B(F)(Cn||(Cn=L([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),Te=c.memo(t=>{const{delay:e=300,flex:n,message:o=Js,minWidth:a,paneKey:r,path:i,selected:l,title:u,tone:d}=t,p=c.useMemo(()=>typeof o=="function"?o(i?i.split(";"):[]):o,[o,i]),[h,b]=c.useState(()=>typeof p=="string"?p:Qs);c.useEffect(()=>{if(typeof p!="object"||typeof p.subscribe=="function")return;const _=p.subscribe(b);return()=>_.unsubscribe()},[p]);const[m,x]=c.useState(null),[P,E]=c.useState(!1);return c.useEffect(()=>{if(m)return Da(()=>E(!0))},[m]),s(Ye,{flex:n,id:r,minWidth:a,selected:l,tone:d,children:s(Re,{children:I(Zs,{align:"center","data-mounted":P?"":void 0,direction:"column",height:"fill",justify:"center",ref:x,children:[s(Qe,{muted:!0}),(u||h)&&s(M,{marginTop:3,children:s(T,{align:"center",muted:!0,size:1,children:u||h})})]})})})});Te.displayName="LoadingPane";const ec={component:c.lazy(()=>Le(()=>import("./index-f7e2fcf3-5b43d2e2.js"),["static/index-f7e2fcf3-5b43d2e2.js","static/sanity-e8d7760d.js"])),document:c.lazy(()=>Le(()=>import("./index-04cc5656-0ab06067.js"),["static/index-04cc5656-0ab06067.js","static/sanity-e8d7760d.js"])),documentList:c.lazy(()=>Le(()=>import("./index-7df237fe-6fe96042.js"),["static/index-7df237fe-6fe96042.js","static/sanity-e8d7760d.js","static/PaneItem-5e36e932-ffab26bc.js"])),list:c.lazy(()=>Le(()=>import("./index-58d53f9a-85eb5543.js"),["static/index-58d53f9a-85eb5543.js","static/sanity-e8d7760d.js","static/PaneItem-5e36e932-ffab26bc.js"]))},tc=c.memo(function(e){const{active:n,childItemId:o,groupIndex:a,index:r,itemId:i,pane:l,paneKey:u,params:d,payload:p,path:h,selected:b,siblingIndex:m}=e,x=ec[l.type]||Xs;return s(Os,{flatIndex:r,index:a,params:d,payload:p,siblingIndex:m,children:s(c.Suspense,{fallback:s(Te,{paneKey:u,path:h,selected:b}),children:s(x,{childItemId:o||"",index:r,itemId:i,isActive:n,isSelected:b,paneKey:u,pane:l})})})},(t,e)=>{let{params:n={},payload:o=null,...a}=t,{params:r={},payload:i=null,...l}=e;if(!xt(n,r)||!xt(o,i))return!1;const u=new Set([...Object.keys(a),...Object.keys(l)]);for(const d of u)if(a[d]!==l[d])return!1;return!0});function Wo(t){const{children:e,flex:n,minWidth:o,paneKey:a,title:r="Error",tone:i="critical"}=t;return I(Ye,{flex:n,id:a,minWidth:o,tone:i,children:[s(Xe,{title:r}),s(Re,{overflow:"auto",children:s(M,{paddingX:4,paddingY:5,children:e})})]})}function nc(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function oc(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"This document was deleted. It can still be recovered from history and if you continue editing it will be recreated.":"Successfully performed ".concat(t," on document")}const ac=["patch","commit"],rc=c.memo(function(){const{push:e}=Ke(),{documentId:n,documentType:o}=W(),a=Ma(n,o),r=c.useRef(a);return c.useEffect(()=>{!a||a===r.current||(a.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:nc(a.op),description:I("details",{children:[s("summary",{children:"Details"}),a.error.message]})}),a.type==="success"&&!ac.includes(a.op)&&e({closable:!0,status:"success",title:oc(a.op)}),r.current=a)},[a,e]),null}),ic=t=>{const{features:e,hasValue:n,changesOpen:o}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:Hr,isDisabled:o||!n}:null},sc=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:Gr,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},cc=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:$r,shortcut:"Ctrl+Alt+O"}:null},lc=t=>[cc,ic,sc].filter(Boolean).map(n=>n(t)).filter(n=>n!==null),uc=t=>pe(t)&&typeof t._id=="string"&&typeof t._type=="string";function dc(t){const[e,n]=c.useState(void 0),[o,a]=c.useState(null),{resolveProductionUrl:r}=qe().document,i=xi(t);if(o)throw o;return c.useEffect(()=>{i.pipe(Po(500),Ze(l=>uc(l)?To(r({document:l})):ce(void 0)),gr(l=>{const u=pe(l)&&typeof l.message=="string"?l.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(u))})).subscribe({next:n,error:a})},[r,i]),e}function pc(t,e){const n=e.panePayload||{},o=e.templateName;e.urlTemplate&&o&&o!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(o,'". Using "').concat(o,'".'));const a=o||e.urlTemplate,r=t.filter(u=>u.schemaType===e.documentType),i={...e.templateParams,...typeof n=="object"?n||{}:{}};let l=a;return!a&&r.length===1&&(l=r[0].id),{templateName:l,templateParams:i}}const hc={},Vo=c.memo(t=>{const{children:e,index:n,pane:o,paneKey:a}=t,r=Ta(Ra),i=uo(),l=po(),{actions:u,badges:d,unstable_languageFilter:p}=qe().document,h=ka(),b=ja(),m=ke(),{features:x}=he(),{push:P}=Ke(),{options:E,menuItemGroups:y,title:_=null,views:w=[]}=o,v=ge(E),f=v.id,g=Pt(f),C=E.type,S=ge(m.params),O=ge(m.payload),{templateName:D,templateParams:R}=c.useMemo(()=>pc(l,{documentType:C,templateName:v.template,templateParams:v.templateParameters,panePayload:O,urlTemplate:S==null?void 0:S.template}),[C,v,S,O,l]),k=Na({documentId:g,documentType:C,templateName:D,templateParams:R}),j=ge(k),{patch:N}=Aa(g,C),X=La(g,C),{validation:le}=Fa(g,C),ne=Ba(g,C),te=i.get(C),U=(X==null?void 0:X.draft)||(X==null?void 0:X.published)||j.value,oe=c.useMemo(()=>u({schemaType:C,documentId:g}),[u,g,C]),Jo=c.useMemo(()=>d({schemaType:C,documentId:g}),[d,g,C]),Qo=c.useMemo(()=>p({schemaType:C,documentId:g}),[g,C,p]),qt=ge(le),ot=ge(w),V=m.params||hc,[Xt,Ce]=c.useState(()=>V.path?De(V.path):[]),Zo=V.view||ot[0]&&ot[0].id||null,at=c.useMemo(()=>h.getTimeline({publishedId:g,enableTrace:ho}),[g,h]),[ea,ta]=c.useState("closed"),{historyController:ae}=fo(()=>h.getTimelineController({client:r,documentId:g,documentType:C,timeline:at}),[r,g,C,at]);ae.setRange(V.since||null,V.rev||null);const Ee=ae.changesPanelActive(),fe=dc(U),[na,oa]=c.useState([]);c.useEffect(()=>{const A=b.documentPresence(g).subscribe(H=>{oa(H)});return()=>{A.unsubscribe()}},[g,b]);const Jt=!!U,rt=c.useMemo(()=>lc({features:x,hasValue:Jt,changesOpen:Ee,previewUrl:fe}),[x,Jt,Ee,fe]),it=V.inspect==="on",Qt=Ee?ae.sinceAttributes():(X==null?void 0:X.published)||null,st=ne==="connected"&&X.ready,Zt=ae.onOlderRevision(),en=c.useMemo(()=>Zt?ae.displayed()||{_id:U._id,_type:U._type}:U,[ae,V.rev,V.since,U,Zt]),aa=c.useCallback((A,H)=>{m.setParams({...m.params,since:A,rev:H||void 0})},[m]),ra=c.useCallback(A=>{Ce(A),b.setLocation([{type:"document",documentId:g,path:A,lastActiveAt:new Date().toISOString()}])},[g,b,Ce]),ia=c.useCallback(A=>{Ce([])},[Ce]),tn=c.useRef(()=>{throw new Error("Nope")});tn.current=A=>{N.execute(za(A.patches),j.value)};const sa=c.useCallback(A=>tn.current(A),[]),ca=c.useCallback(()=>{m.setParams({...V,since:void 0})},[m,V]),ct=c.useCallback(()=>{m.setParams({...V,since:"@lastPublished"})},[m,V]),la=c.useCallback(()=>m.closeCurrent(),[m]),ua=c.useCallback(()=>m.duplicateCurrent(),[m]),Ae=c.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!it)?m.setParams({...V,inspect:"on"}):m.setParams(jt(V,"inspect"))},[it,m,V]),lt=c.useCallback(A=>A.action==="production-preview"&&fe?(window.open(fe),!0):A.action==="inspect"?(Ae(!0),!0):A.action==="reviewChanges"?(ct(),!0):!1,[ct,fe,Ae]),da=c.useCallback(A=>{for(const H of rt)if(H.shortcut&&Nt(H.shortcut,A)){A.preventDefault(),A.stopPropagation(),lt(H);return}},[lt,rt]),pa=c.useCallback(()=>Ae(!1),[Ae]),[ha,nn]=c.useState([]),[fa,on]=c.useState(),[an,rn]=c.useState(),[sn,cn]=c.useState(),ma=c.useCallback((A,H)=>{rn(J=>ve(J,A,H))},[]),ga=c.useCallback((A,H)=>{cn(J=>ve(J,A,H))},[]),va=c.useCallback((A,H)=>on(J=>ve(J,A,H)),[]),ba=U._createdAt?"update":"create",ln=c.useMemo(()=>!!(te!=null&&te.liveEdit),[C,i]),ut=U._id?U._id:"dummy-id",ya=c.useMemo(()=>({...U,_id:ln?Pt(ut):Wa(ut)}),[ln,U,ut]),[Ie,dt]=Va({document:ya,permission:ba}),{revTime:un}=ae,dn=!(U!=null&&U._id),_a=c.useMemo(()=>{const A=!dt&&!(Ie!=null&&Ie.granted),H=!pn(te,"update"),J=dn&&!pn(te,"create");return!st||un!==null||A||H||J||ne==="reconnecting"},[ne,dn,dt,Ie==null?void 0:Ie.granted,st,un,te]),pt=Ua(te,{value:en,readOnly:_a,comparisonValue:Qt,focusPath:Xt,openPath:ha,collapsedPaths:an,presence:na,validation:qt,collapsedFieldSets:sn,fieldGroupState:fa,changesOpen:Ee}),ht=c.useRef(pt);ht.current=pt;const xa=c.useCallback(A=>{Ha(ht.current,A).forEach(J=>{J.type==="expandPath"&&rn(me=>ve(me,J.path,!1)),J.type==="expandFieldSet"&&cn(me=>ve(me,J.path,!1)),J.type==="setSelectedGroup"&&on(me=>ve(me,J.path,J.groupName))}),nn(A)},[ht]),Pa={actions:oe,activeViewId:Zo,badges:Jo,changesOpen:Ee,collapsedFieldSets:sn,collapsedPaths:an,compareValue:Qt,connectionState:ne,displayed:en,documentId:g,documentIdRaw:f,documentType:C,editState:X,focusPath:Xt,menuItems:rt,onBlur:ia,onChange:sa,onFocus:ra,onPathOpen:xa,onHistoryClose:ca,onHistoryOpen:ct,onInspectClose:pa,onKeyUp:da,onMenuAction:lt,onPaneClose:la,onPaneSplit:ua,onSetActiveFieldGroup:va,onSetCollapsedPath:ma,onSetCollapsedFieldSet:ga,historyController:ae,index:n,inspectOpen:it,validation:qt,menuItemGroups:y||[],paneKey:a,previewUrl:fe,ready:st,schemaType:te,isPermissionsLoading:dt,permissions:Ie,setTimelineMode:ta,setTimelineRange:aa,timeline:at,timelineMode:ea,title:_,value:U,views:ot,formState:pt,unstable_languageFilter:Qo};return c.useEffect(()=>{ne==="reconnecting"&&P({id:"sanity/desk/reconnecting",status:"warning",title:s(z,{children:"Connection lost. Reconnecting…"})})},[ne,P]),c.useEffect(()=>{Ce(V.path?De(V.path):[]),nn([])},[V.path,g]),s(Ga.Provider,{value:Pa,children:e})});Vo.displayName="DocumentPaneProvider";const fc={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},mc={create:vn,delete:bi,discardDraft:Me,initial:vn,editDraft:bn,editLive:bn,publish:Do,unpublish:yi};function Mt(t){return fc[t]}function gc(t){return mc[t]}function vc(t,e){return{topSelection:e,bottomSelection:t,disabledBeforeSelection:!0}}function bc(t){return{topSelection:t,bottomSelection:t}}function yc(t){let{maxLength:e,userIds:n}=t;return s(So,{maxLength:e,children:n.map(o=>s(wo,{user:o,withTooltip:!0},o))})}const ye=B(F)(t=>{let{theme:e}=t;var n;const o=(n=e.sanity.color.base.skeleton)==null?void 0:n.from;return re(En||(En=L([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),o)}),_c=B(mo)(t=>{let{state:e="enabled",isHovered:n,theme:o}=t;const{color:a}=o.sanity,r=a.button.default.primary.enabled;return re(In||(In=L([`
    position: relative;
    min-width: 244px;

    `,`

    `,`

      `,`

    // line styling 👇
      &:first-child `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &:last-child `,`::before {
      height: 50%;
    }

    `,`

    // Remove timeline lines when using the keyboard to navigate timeline items
    &:focus `,`::before {
      background: transparent;
    }
  `])),e==="selected"&&re(On||(On=L([`
      --card-bg-color: `,`;
      --card-fg-color: `,`;
      --card-muted-fg-color: `,`;
      --card-border-color: `,`;
      &:not([data-selection-bottom='true']) {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }
    `])),r.bg,r.fg,r.muted,r.bg),e==="withinSelection"&&re(Dn||(Dn=L([`
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      box-shadow: 0px 3px 0px 0px var(--card-bg-color);
      &:not([data-selection-top='true']) {
        border-radius: 0;
      }

      `,` {
        &::before {
          background: var(--card-hairline-soft-color);
        }
      }
    `])),ye),e==="disabled"&&re(Mn||(Mn=L([`
      [data-ui='Avatar'] {
        opacity: 0.2;
      }
    `]))),ye,ye,(n||e==="selected")&&re(Tn||(Tn=L([`
      `,`::before {
        background: transparent;
      }
    `])),ye),ye)}),xc=B(M)(Rn||(Rn=L([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),Pc=B(T)(kn||(kn=L([`
  text-transform: capitalize;
`]))),Sc=B(M)(jn||(jn=L([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(be(e.sanity.space[1]))}),wc={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function Cc(t){const{isSelectionBottom:e,isSelectionTop:n,state:o,onSelect:a,timestamp:r,chunk:i,type:l}=t,u=gc(l),d=Array.from(i.authors),p=ie(r,{minimal:!0}),h=c.useMemo(()=>{const y=new Date(r);return di(y,"MMM d, yyyy, hh:mm a")},[r]),b=o==="selected",m=o==="withinSelection",[x,P]=c.useState(!1),E=c.useCallback(y=>{y.preventDefault(),y.stopPropagation(),a(i)},[a,i]);return s(_c,{"data-ui":"timelineItem",radius:2,"data-chunk-id":i.id,padding:0,tone:x||b||m?"default":wc[l],pressed:m,state:o,selected:b,isHovered:x,disabled:o==="disabled","data-selection-bottom":e,"data-selection-top":n,onClick:E,children:s(we,{portal:!0,placement:"left",fallbackPlacements:["bottom"],content:s(ee,{padding:3,space:3,children:s(T,{size:1,children:h})}),children:s(M,{onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),paddingX:2,children:I(F,{align:"stretch",children:[s(ye,{align:"center",children:s(xc,{padding:2,children:s(T,{size:2,children:u&&c.createElement(u)})})}),I(ee,{space:2,margin:2,children:[s(M,{children:s(Pc,{size:1,weight:"medium",children:Mt(l)||s("code",{children:l})})}),s(Sc,{paddingX:1,children:s(T,{size:0,muted:!0,children:p})})]}),s(F,{flex:1,justify:"flex-end",align:"center",children:s(yc,{maxLength:3,userIds:d})})]})})})})}const Ec=B(M)(Nn||(Nn=L([`
  overflow: auto;
  -webkit-overflow-scrolling: touch;
`]))),Ic=B(ee)(An||(An=L([`
  max-width: 200px;
`]))),Oc=B(At)(Ln||(Ln=L([`
  overflow: auto;
  box-sizing: border-box;
  max-height: calc(100vh - 198px);
`]))),Dc=20,Tt=t=>{let{timeline:e,disabledBeforeSelection:n,topSelection:o,bottomSelection:a,onSelect:r,onLoadMore:i}=t;const l=c.useRef(null),u=c.useRef(null),[d,p]=c.useState(null);let h=n?"disabled":"enabled";const b=c.useCallback(()=>{const m=l.current;if(d&&m){const{offsetHeight:x,scrollTop:P}=m,E=x+P+Dc,y=d.offsetTop<E;y&&requestAnimationFrame(()=>i(y))}},[i,d]);return c.useEffect(b,[b]),I(Ec,{ref:l,onScroll:b,"data-ui":"timeline",children:[e.chunkCount===0&&I(Ic,{padding:3,space:3,children:[s(T,{size:1,weight:"semibold",children:"No document history"}),s(T,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),e.chunkCount>0&&s(Oc,{ref:u,padding:1,space:0,children:e.mapChunks(m=>{const x=o===m,P=a===m;x&&(h="withinSelection"),P&&(h="selected");const E=s(Cc,{chunk:m,isSelectionBottom:P,isSelectionTop:x,state:h,onSelect:r,type:m.type,timestamp:m.endTimestamp},m.id);return h==="selected"&&(h="enabled"),E})}),!e.reachedEarliestEntry&&s(F,{align:"center",justify:"center",padding:4,ref:p,children:s(Qe,{muted:!0})})]})};Tt.displayName="Timeline";const Mc=B(Lt)(Fn||(Fn=L([`
  & > div {
    display: flex;
    flex-direction: column;

    & > [data-ui='Card'] {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;

      /* This is the scrollable container rendered by <Timeline /> */
      & > div {
        flex: 1;
        min-height: 0;
      }
    }
  }
`])));function Uo(t){let{chunk:e,mode:n,placement:o}=t;const{historyController:a,setTimelineRange:r,setTimelineMode:i,timeline:l,ready:u}=W(),[d,p]=c.useState(!1),[h,b]=c.useState(null),[m,x]=c.useState(null),P=c.useCallback(()=>{i(n),p(!0)},[n,i]),E=c.useCallback(()=>{i("closed"),p(!1)},[i]),y=c.useCallback(()=>{E()},[E]),_=c.useCallback(k=>{d&&(k.key==="Escape"||k.key==="Tab")&&(E(),h==null||h.focus())},[h,E,d]);Wt(y,[m,h]),Vt(_);const w=c.useCallback(k=>{const[j,N]=a.findRangeForNewRev(k);i("closed"),p(!1),r(j,N)},[a,i,r]),v=c.useCallback(k=>{const[j,N]=a.findRangeForNewSince(k);i("closed"),p(!1),r(j,N)},[a,i,r]),f=c.useCallback(k=>{a.setLoadMore(k)},[a]),g=d&&s("div",{ref:x,children:n==="rev"?s(Tt,{onSelect:w,onLoadMore:f,timeline:l,...bc(a.realRevChunk)}):s(Tt,{onSelect:v,onLoadMore:f,timeline:l,...vc(a.sinceTime,a.realRevChunk)})}),C=ie((e==null?void 0:e.endTimestamp)||"",{agoSuffix:!0}),S=e?"".concat(vr(Mt(e.type))," ").concat(C):"Current version",O=e?"Since ".concat(Mt(e.type)," ").concat(C):"Since unknown version";return s(Mc,{constrainSize:!0,content:g,"data-ui":"versionMenu",open:d,placement:o,portal:!0,children:s(q,{disabled:!u,mode:"bleed",fontSize:1,padding:2,iconRight:br,onClick:d?E:P,ref:b,selected:d,text:d?n==="rev"?"Select version":"Review changes since":n==="rev"?S:O})})}function Tc(){return I(F,{align:"center",justify:"center",children:[s(Qe,{muted:!0}),s(M,{marginTop:3,children:s(T,{align:"center",children:"Loading changes…"})})]})}function Rc(t){const e=new Map;return Yr(t,n=>{if(n.action==="unchanged"||!("annotation"in n)||!n.annotation)return!0;const{author:o,timestamp:a}=n.annotation,r=e.get(o);return(!r||r.timestamp<a)&&e.set(o,n.annotation),!0}),Array.from(e.values()).sort((n,o)=>n.timestamp<o.timestamp?1:-1)}const kc=B(go)(Bn||(Bn=L([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function jc(){const{documentId:t,onHistoryClose:e,historyController:n,schemaType:o,value:a}=W(),{collapsed:r}=yr(),i=c.useRef(null),u=n.selectionState==="loading",d=n.sinceTime,p=n.currentObjectDiff(),h=!n.onOlderRevision(),b=Pe.useMemo(()=>({documentId:t,schemaType:o,FieldWrapper:_r,rootDiff:p,isComparingCurrent:h,value:a}),[t,p,h,o,a]),m=Pe.useMemo(()=>p?Rc(p):[],[p]);return r?null:I(F,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[s(Xe,{actions:s(q,{icon:Me,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:m.length>0&&s(M,{paddingRight:1,children:s(xr,{annotations:m,description:"Changes by",placement:"bottom-end",children:s(So,{maxLength:4,children:m.map(x=>{let{author:P}=x;return s(wo,{user:P},P)})})})}),tabs:s(Uo,{mode:"since",chunk:d,placement:"bottom-start"}),title:"Changes"}),s(Re,{children:s(zt,{element:i.current,children:s(kc,{"data-ui":"Scroller",ref:i,children:s(M,{flex:1,padding:4,children:s(Nc,{diff:p,documentContext:b,loading:u})})})})})]})}function Nc(t){let{diff:e,documentContext:n,loading:o}=t;const{schemaType:a}=W();return o?s(Tc,{}):e?s(Sr.Provider,{value:n,children:s(wr,{diff:e,schemaType:a})}):s(Pr,{})}function Ac(t,e,n){const o=$a(),[a,r]=c.useState(n),i=c.useMemo(()=>o.forNamespace("desk-tool"),[o]),l=c.useMemo(()=>t?i.forNamespace(t).forKey(e):i.forKey(e),[i,t,e]);c.useEffect(()=>{const d=l.listen(n).subscribe({next:r});return()=>d==null?void 0:d.unsubscribe()},[n,e,t,l]);const u=c.useCallback(d=>{r(d),l.set(d)},[l]);return c.useMemo(()=>[a,u],[u,a])}const _e={id:"parsed",title:"Parsed"},xe={id:"raw",title:"Raw JSON"},Lc=[_e,xe],$e=ws(1e3);function Ho(t,e){const n=$e.get(t);return n===void 0?($e.set(t,Array.isArray(e)||pe(e)),Ho(t,e)):n}function Fc(t){const{path:e}=t,n=$e.get(e);n!==void 0&&$e.set(e,!n)}function Go(t){const e=window.getSelection();if(e){const n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t),e.addRange(n)}}function no(t){Go(t.currentTarget)}function Bc(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),Go(t.currentTarget))}function zc(t){return pe(t)&&gn(t._id)&&gn(t._type)}const Wc=B.div(t=>{let{theme:e}=t;const{color:n,fonts:o,space:a}=e.sanity;return re(zn||(zn=L([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),o.code.family,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]),be(a[3]),be(a[4]),o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]/2),n.syntax.property,n.syntax.constant,be(a[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function Vc(t){const{onChange:e,query:n}=t,o=c.useCallback(a=>e(a.target.value),[e]);return s(pi,{icon:hi,onChange:o,placeholder:"Search",radius:2,value:n||""})}function Uc(t){const{value:e}=t,{onInspectClose:n,paneKey:o}=W(),a="".concat(o,"_inspect_"),[r,i]=Ac("desk-tool","inspect-view-preferred-view-mode-".concat(o),"parsed"),l=Lc.find(p=>p.id===r),u=c.useCallback(()=>{i(_e.id)},[i]),d=c.useCallback(()=>{i(xe.id)},[i]);return s(Ht,{id:"".concat(a,"dialog"),header:zc(e)?I(z,{children:["Inspecting"," ",s("em",{children:s(Kr,{document:e})})]}):s("em",{children:"No value"}),onClose:n,onClickOutside:n,width:3,children:I(F,{direction:"column",height:"fill",children:[s(de,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:I(Eo,{space:1,children:[s(wt,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(_e.id),label:_e.title,onClick:u,selected:l===_e}),s(wt,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(xe.id),label:xe.title,onClick:d,selected:l===xe})]})}),I(qr,{"aria-labelledby":"".concat(a,"tab-").concat(r),flex:1,id:"".concat(a,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[l===_e&&s(Wc,{children:s(Ss,{data:e,isExpanded:Ho,onClick:Fc,search:Vc})}),l===xe&&s(Ct,{language:"json",tabIndex:0,onKeyDown:Bc,onDoubleClick:no,onFocus:no,children:JSON.stringify(e,null,2)})]})]})})}const Hc=B(de)(Wn||(Wn=L([`
  position: relative;
  z-index: 50;
`]))),oo=B(T)(Vn||(Vn=L([`
  & > * {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),$o=c.memo(()=>{var t,e,n,o,a,r;const i=Ya(),{params:l,groupIndex:u,routerPanesState:d,replaceCurrent:p,BackLink:h}=ke(),b=(t=d[u])==null?void 0:t[0].id,m=d[u-1],x=m==null?void 0:m[0],P=x==null?void 0:x.id,E=!!((e=x==null?void 0:x.params)!=null&&e.rev),y=c.useMemo(()=>(l==null?void 0:l.parentRefPath)&&De(l.parentRefPath)||null,[l==null?void 0:l.parentRefPath]),_=fo(()=>{const f=y==null?void 0:y[0];if(!P||!f||!y)return ce({loading:!1});const g=Pt(P),C=De(f),S=C.findIndex(O=>typeof O=="object"&&"_key"in O);return Co(ce({loading:!0}),i.unstable_observePathsDocumentPair(g,S===-1?C:C.slice(0,S)).pipe(Po(750),ue(O=>{let{draft:D,published:R}=O;var k;return{loading:!1,result:{availability:{draft:D.availability,published:R.availability},refValue:(k=Cr(D.snapshot||R.snapshot,y))==null?void 0:k._ref}}})))},[P,y],{loading:!0}),w=c.useCallback(()=>{var f;_.loading||(f=_.result)!=null&&f.refValue&&p({id:_.result.refValue,params:l})},[_.loading,_.result,p,l]);return!P||!y||E||_.loading||!((n=_.result)!=null&&n.availability.draft.available)&&!((o=_.result)!=null&&o.availability.published.available)||((a=_.result)==null?void 0:a.refValue)===b?null:s(Hc,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:s(je,{paddingX:4,paddingY:2,sizing:"border",width:1,children:I(F,{align:"center",children:[s(T,{size:1,children:s(Ft,{})}),(r=_.result)!=null&&r.refValue?I(z,{children:[s(M,{flex:1,marginLeft:3,children:s(oo,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),s(M,{marginLeft:3,children:s(q,{onClick:w,icon:vo,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):I(z,{children:[s(M,{flex:1,marginLeft:3,children:s(oo,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),s(M,{marginLeft:3,children:s(q,{as:h,icon:Me,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});$o.displayName="ReferenceChangedBanner";const Gc=B(de)(Un||(Un=L([`
  position: relative;
  z-index: 50;
`])));function $c(t){let{granted:e,requiredPermission:n}=t;var o,a;const r=Xr(),i=((o=r==null?void 0:r.roles)==null?void 0:o.length)!==1,l=Yc(((a=r==null?void 0:r.roles)==null?void 0:a.map(u=>s("code",{children:u.title},u.name)))||[],", ");return e?null:s(Gc,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:s(je,{paddingX:4,paddingY:3,sizing:"border",width:1,children:I(F,{align:"flex-start",children:[s(T,{size:1,children:s(Jr,{})}),s(M,{flex:1,marginLeft:3,children:I(T,{size:1,children:["Your role",i&&"s"," ",l," ",i?"do":"does"," not have permissions to"," ",n," this document."]})})]})})})}function Yc(t,e){return t.reduce((n,o)=>n===null?[o]:n.concat([e,o]),null)}function Kc(t){const e=c.useRef();return c.useEffect(()=>{e.current=t},[t]),e.current}const qc=1e3*60*60*24*24;function Xc(t){const e=Ke(),n=Kc(t.enabled);c.useEffect(()=>{!n&&t.enabled&&e.push({...t,duration:qc}),n&&!t.enabled&&e.push({...t,duration:.01})},[t,e,n])}const Jc=t=>t.preventDefault();function Qc(t){var e;const{hidden:n,margins:o}=t,{collapsedFieldSets:a,collapsedPaths:r,displayed:i,editState:l,documentId:u,documentType:d,onChange:p,validation:h,ready:b,formState:m,onFocus:x,onBlur:P,onSetCollapsedPath:E,onPathOpen:y,onSetCollapsedFieldSet:_,onSetActiveFieldGroup:w}=W(),v=lo(),f=Qr(u),g=c.useMemo(()=>Zr(),[]),C=(e=l==null?void 0:l.transactionSyncLock)==null?void 0:e.enabled;Xc({id:"sync-lock-".concat(u),status:"warning",enabled:C,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),c.useEffect(()=>{const D=v.pair.documentEvents(u,d).pipe(ei(R=>{R.type==="mutation"&&g.publish(Zc(R)),R.type==="rebase"&&g.publish(el(R))})).subscribe();return()=>{D.unsubscribe()}},[u,v,d,g]);const S=!!(i!=null&&i._rev);c.useEffect(()=>{S&&g.publish({type:"mutation",patches:[],snapshot:i})},[S]);const O=c.useRef(null);return c.useEffect(()=>{ti(O.current)},[]),s(je,{hidden:n,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:s(ni,{margins:o,children:s(M,{as:"form",onSubmit:Jc,ref:O,children:b?m===null?s(M,{padding:2,children:s(T,{children:"This form is hidden"})}):s(oi,{__internal_patchChannel:g,collapsedFieldSets:a,collapsedPaths:r,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,id:"root",members:m.members,onChange:p,onFieldGroupSelect:w,onPathBlur:P,onPathFocus:x,onPathOpen:y,onSetFieldSetCollapsed:_,onSetPathCollapsed:E,presence:f,readOnly:m.readOnly,schemaType:m.schemaType,validation:h,value:m.value}):s(Cs,{ms:300,children:I(F,{align:"center",direction:"column",height:"fill",justify:"center",children:[s(Qe,{muted:!0}),s(M,{marginTop:3,children:s(T,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function Zc(t){const e=t.mutations.map(n=>n.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:Et(t.origin,e)}}function el(t){const e=t.remoteMutations.map(o=>o.patch).filter(Boolean),n=t.localMutations.map(o=>o.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:Et("remote",e).concat(Et("local",n))}}function tl(){const{activeViewId:t,paneKey:e,views:n}=W(),o="".concat(e,"tabpanel");return s(Eo,{space:1,children:n.map((a,r)=>{var i;return s(nl,{icon:a.icon,id:"".concat(e,"tab-").concat(a.id),isActive:t===a.id,label:s(z,{children:a.title}),tabPanelId:o,viewId:r===0?null:(i=a.id)!=null?i:null},a.id)})})}function nl(t){const{icon:e,id:n,isActive:o,label:a,tabPanelId:r,viewId:i}=t,{ready:l}=W(),{setView:u}=ke(),d=c.useCallback(()=>u(i),[u,i]);return s(wt,{"aria-controls":r,disabled:!l,fontSize:1,icon:e,id:n,selected:o,label:a,onClick:d})}const _t={error:{tone:"critical",icon:ai},warning:{tone:"caution",icon:Ft},info:{tone:"primary",icon:ri}};function ol(t){const{boundaryElement:e,isOpen:n,setOpen:o}=t,{onFocus:a,onPathOpen:r,schemaType:i,validation:l}=W(),u=c.useId(),d=l.length>0,p=l.some(Er),h=l.some(Ir),b=l.some(Or),m=c.useMemo(()=>{if(p)return _t.error;if(h)return _t.warning;if(b)return _t.info},[p,b,h]),x=c.useCallback(E=>{r(E),a(E)},[a,r]),P=c.useCallback(()=>o(!1),[o]);return d?s(Io,{id:u||"",button:s(q,{...m,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:s(At,{open:n,children:s(Dr,{documentType:i,validation:l,onClose:P,onFocus:x})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function al(){const{connectionState:t,schemaType:e,title:n,value:o}=W(),a=!!o&&t==="connected",{error:r,value:i}=Mr({enabled:a,schemaType:e,value:o});return t!=="connected"?s(z,{}):n?s(z,{children:n}):o?r?I(z,{children:["Error: ",r.message]}):s(z,{children:(i==null?void 0:i.title)||s("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):I(z,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const rl=t=>!!t.showAsAction,il=Ka(rl),Yo=c.memo(c.forwardRef((t,e)=>{let{rootElement:n}=t;const{onMenuAction:o,onPaneClose:a,onPaneSplit:r,historyController:i,validation:l,menuItems:u,menuItemGroups:d,schemaType:p,ready:h,views:b,unstable_languageFilter:m}=W(),{revTime:x}=i,{features:P}=he(),{index:E,BackLink:y,hasGroupSiblings:_}=ke(),w=c.useMemo(()=>u.filter(il),[u]),[v,f]=Pe.useState(!1),g=b.length>1,C=P.reviewChanges,S=P.splitViews&&r&&b.length>1,O=S&&_,D=!O&&!P.backButton;return s(Xe,{ref:e,loading:!h,title:s(al,{}),tabs:g&&s(tl,{}),backButton:P.backButton&&E>0&&s(q,{as:y,"data-as":"a",icon:qa,mode:"bleed"}),subActions:C&&s(Uo,{chunk:x,mode:"rev",placement:"bottom-end"}),actions:I(bo,{space:1,children:[m.length>0&&s(z,{children:m.map((R,k)=>c.createElement(R,{key:"language-filter-".concat(k),schemaType:p}))}),l.length>0&&s(ol,{boundaryElement:n,isOpen:v,setOpen:f},"validation-menu"),s(Xa,{itemGroups:d,items:w,onAction:o},"context-menu"),S&&s(q,{icon:Ja,mode:"bleed",onClick:r,title:"Split pane right"},"split-pane-button"),O&&s(q,{icon:Me,mode:"bleed",onClick:a,title:"Close split pane"},"close-view-button"),D&&s(q,{icon:Me,mode:"bleed",title:"Close pane group",as:y},"close-view-button")]})})}));Yo.displayName="DocumentPanelHeader";const sl=B(go)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:re(Hn||(Hn=L([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),cl=function(e){const{footerHeight:n,isInspectOpen:o,rootElement:a,setDocumentPanelPortalElement:r}=e,{activeViewId:i,displayed:l,documentId:u,editState:d,value:p,views:h,ready:b,schemaType:m,permissions:x,isPermissionsLoading:P}=W(),{collapsed:E}=_o(),y=Tr(),{features:_}=he(),[w,v]=c.useState(null),f=Je(w),g=c.useRef(null),[C,S]=c.useState(null),O=p._createdAt?"update":"create",D=c.useMemo(()=>h.find(le=>le.id===i)||h[0]||{type:"form"},[i,h]),R=_.splitPanes&&g.current||y.element,k=c.useMemo(()=>E?[(f==null?void 0:f.height)||0,0,n?n+2:2,0]:[0,0,2,0],[E,n,f]),j=D.type!=="form",N=c.useMemo(()=>D.type==="component"&&D.component&&c.createElement(D.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:l||p,historical:l,published:(d==null?void 0:d.published)||null},documentId:u,options:D.options,schemaType:m}),[D,l,u,d==null?void 0:d.draft,d==null?void 0:d.published,m,p]);c.useEffect(()=>{C!=null&&C.scrollTo&&C.scrollTo(0,0)},[u,C]),c.useEffect(()=>{R&&r(R)},[R,r]);const X=c.useMemo(()=>o?s(Uc,{value:l||p}):null,[o,l,p]);return I(F,{direction:"column",flex:2,overflow:E?void 0:"hidden",children:[s(Yo,{rootElement:a,ref:v}),s(Re,{children:s(Bt,{element:R,__unstable_elements:{documentScrollElement:C},children:I(zt,{element:C,children:[D.type==="form"&&!P&&b&&I(z,{children:[s($c,{granted:!!(x!=null&&x.granted),requiredPermission:O}),s($o,{})]}),I(sl,{$disabled:E||!1,"data-testid":"document-panel-scroller",ref:S,children:[s(Qc,{hidden:j,margins:k},u+(b?"_ready":"_pending")),N]}),X,s("div",{"data-testid":"document-panel-portal",ref:g})]})})})]})},Ko=["left","bottom"],ll={small:0,medium:1,large:2,full:"auto"};function ul(t){const{dialog:e,referenceElement:n}=t;return s(Lt,{content:s(dl,{dialog:e}),fallbackPlacements:Ko,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function dl(t){const{dialog:e}=t,{cancelButtonIcon:n,cancelButtonText:o,confirmButtonIcon:a,confirmButtonText:r,message:i,onCancel:l,onConfirm:u,tone:d}=e,{isTopLayer:p}=Ro(),[h,b]=c.useState(null),m=c.useCallback(()=>{p&&l()},[p,l]),x=c.useCallback(P=>{P.key==="Escape"&&p&&l()},[p,l]);return Wt(m,[h]),Vt(x),I(F,{direction:"column",ref:b,style:{minWidth:320-16,maxWidth:400},children:[s(M,{flex:1,overflow:"auto",padding:4,children:s(T,{children:i})}),s(M,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:I(fi,{columns:2,gap:2,children:[s(q,{icon:n,onClick:l,mode:"ghost",text:o||"Cancel"}),s(q,{icon:a,onClick:u,text:r||"Confirm",tone:d})]})})]})}function pl(t){const{dialog:e}=t,n=c.useId(),o=e.footer&&s(M,{paddingX:4,paddingY:3,children:e.footer});return s(Ut,{zOffset:"fullscreen",children:s(Ht,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:o,header:e.header,id:n,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:ll[e.width],portal:"documentPanelPortalElement",children:s(M,{padding:4,children:e.content})})})}function hl(t){const{dialog:e,referenceElement:n}=t;return s(Lt,{content:s(fl,{dialog:e}),fallbackPlacements:Ko,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function fl(t){const{dialog:e}=t,{content:n,onClose:o}=e,{isTopLayer:a}=Ro(),[r,i]=c.useState(null),l=c.useCallback(()=>{a&&o()},[a,o]),u=c.useCallback(d=>{d.key==="Escape"&&a&&o()},[a,o]);return Wt(l,[r]),Vt(u),s("div",{ref:i,children:n})}function Kt(t){const{dialog:e,referenceElement:n=null}=t,o=c.useId();if(e.type==="confirm")return s(ul,{dialog:e,referenceElement:n});if(e.type==="popover")return s(hl,{dialog:e,referenceElement:n});if(e.type==="dialog"||!e.type)return s(pl,{dialog:e});const a=e;return console.warn("Unsupported modal type ".concat(a.type)),s(Ht,{id:o,onClose:a.onClose,onClickOutside:a.onClose,width:2,children:s(M,{padding:4,children:a.content||I(z,{children:["Unexpected modal type (",s("code",{children:a.type}),")"]})})})}function ml(t){const{actionStates:e,disabled:n}=t,o=c.useId(),a=c.useRef(null),[r,i]=c.useState(-1),[l,u]=c.useState(null),d=c.useCallback(b=>{i(b)},[]),p=c.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),h=e[r];return I(z,{children:[s(Io,{id:"".concat(o,"-action-menu"),button:s(q,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:n,icon:ii,mode:"ghost",ref:a}),menu:s(At,{padding:1,children:e.map((b,m)=>s(gl,{actionState:b,disabled:n,index:m,onAction:d},m))}),popover:p,ref:u}),h&&h.dialog&&s(Ut,{zOffset:"paneFooter",children:s(Kt,{dialog:h.dialog,referenceElement:l})})]})}function gl(t){const{actionState:e,disabled:n,index:o,onAction:a}=t,{onHandle:r}=e,i=c.useCallback(()=>{a(o),r&&r()},[o,a,r]),l=e.title&&s(M,{padding:2,children:s(T,{size:1,children:e.title})});return s(mo,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:n||!!e.disabled,onClick:i,padding:0,tone:e.tone,children:s(we,{content:l,disabled:!l,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:I(F,{align:"center",paddingX:3,children:[I(F,{flex:1,paddingY:3,children:[e.icon&&s(M,{marginRight:3,children:I(T,{children:[c.isValidElement(e.icon)&&e.icon,si.isValidElementType(e.icon)&&c.createElement(e.icon)]})}),s(T,{children:e.label})]}),e.shortcut&&s(M,{marginLeft:3,children:s(Oo,{keys:String(e.shortcut).split("+").map(u=>u.slice(0,1).toUpperCase()+u.slice(1))})})]})})})}function qo(t){const{disabled:e,showMenu:n,states:o}=t,[a,...r]=o,[i,l]=c.useState(null),u=c.useMemo(()=>!a||!a.title&&!a.shortcut?null:I(F,{padding:2,style:{maxWidth:300},align:"center",children:[s(T,{size:1,children:a.title}),a.shortcut&&s(M,{marginLeft:a.title?2:0,children:s(Oo,{keys:String(a.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[a]);return I(F,{children:[a&&s(Rr,{zOffset:200,children:s(we,{disabled:!u,content:u,portal:!0,placement:"top",children:s(ee,{flex:1,children:s(q,{"data-testid":"action-".concat(a.label),disabled:e||!!a.disabled,icon:a.icon,onClick:a.onHandle,ref:l,text:a.label,tone:a.tone||"primary"})})})}),n&&r.length>0&&s(M,{marginLeft:1,children:s(ml,{actionStates:r,disabled:e})}),a&&a.dialog&&s(Kt,{dialog:a.dialog,referenceElement:i})]})}const vl=c.memo(function(){const{actions:e,connectionState:n,documentId:o,editState:a}=W();return!e||!a?null:s(Yt,{actions:e,actionProps:a,children:r=>{let{states:i}=r;return s(qo,{disabled:n!=="connected",showMenu:e.length>1,states:i},o)}})}),bl=c.memo(function(){var e;const{connectionState:n,editState:o,historyController:a}=W(),r=((e=a.revTime)==null?void 0:e.id)||"",i=((o==null?void 0:o.draft)||(o==null?void 0:o.published)||{})._rev===r,l=c.useMemo(()=>({...o||{},revision:r}),[o,r]),u=c.useMemo(()=>[Qa],[]);return s(Yt,{actions:u,actionProps:l,children:d=>{let{states:p}=d;return s(qo,{disabled:n!=="connected"||!!i,showMenu:!1,states:p})}})}),yl={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function _l(t){let{states:e}=t;return s(bo,{space:1,children:e.map((n,o)=>s(we,{content:n.title&&s(M,{padding:2,children:s(T,{size:1,children:n.title})}),disabled:!n.title,placement:"top",portal:!0,children:s(ci,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:n.color?yl[n.color]:void 0,style:{whiteSpace:"nowrap"},children:n.label})},String(o)))})}function xl(){const{badges:t,editState:e}=W();return!e||!t?null:s(Es,{badges:t,badgeProps:e,children:n=>{let{states:o}=n;return s(_l,{states:o})}})}const Pl=B(F)(Gn||(Gn=L([`
  cursor: default;
`])));function Sl(t){const{collapsed:e,disabled:n,lastPublished:o,lastUpdated:a,liveEdit:r}=t,i=ie(o||"",{minimal:!0,agoSuffix:!0}),l=ie(o||"",{minimal:!0}),u=ie(a||"",{minimal:!0,agoSuffix:!0}),d=ie(a||"",{minimal:!0});return s(Pl,{align:"center","data-ui":"SessionLayout",sizing:"border",children:s(we,{placement:"top",portal:!0,content:s(ee,{padding:3,space:3,children:s(T,{size:1,muted:!0,children:r?I(z,{children:["Last updated ",a?u:i]}):I(z,{children:["Last published ",i]})})}),children:s(q,{mode:"bleed",tone:r?"critical":"positive",tabIndex:-1,disabled:n,children:I(F,{align:"center",children:[s(M,{marginRight:e?0:3,children:s(T,{size:2,children:r?s(kr,{}):s(Do,{})})}),!e&&s(T,{size:1,weight:"medium",children:r?s(z,{children:a?d:l}):l})]})})})})}const wl=B(Ne.path)($n||($n=L([`
  transform-origin: center;
`]))),Cl=t=>s(Ne.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),El=t=>s(wl,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Il=t=>s(Ne.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),Ol=t=>s(Ne.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Dl=Za(Yn||(Yn=L([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Ml=B.g(Kn||(Kn=L([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Dl),Tl={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},Rl={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},kl={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},jl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},Nl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function Al(t){const{status:e}=t;return e?s("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:I(Ne.g,{variants:Tl,initial:e,animate:e,children:[I(Ml,{"data-rotate":e==="changes"?void 0:"",children:[s(El,{variants:kl,initial:e,animate:e}),s(Cl,{variants:Rl,initial:e,animate:e})]}),s(Il,{variants:jl,initial:e,animate:e}),s(Ol,{variants:Nl,initial:e,animate:e})]})}):null}const Ll=Pe.forwardRef(function(e,n){const{collapsed:o,status:a,lastUpdated:r,...i}=e,l=ie(r||"",{minimal:!0}),u=ie(r||"",{minimal:!0,agoSuffix:!0}),d=c.useMemo(()=>a==="syncing"?{text:"Saving...",tone:void 0}:a==="changes"?{text:l,tone:"caution"}:a==="saved"?{text:"Saved!",tone:"positive"}:{},[a,l]);return a?s(we,{placement:"top",portal:!0,disabled:a!=="changes",content:I(ee,{padding:3,space:3,children:[s(T,{size:1,weight:"semibold",children:"Review changes"}),I(T,{size:1,muted:!0,children:["Changes saved ",u]})]}),children:s(q,{mode:"bleed",justify:"flex-start",tone:d==null?void 0:d.tone,...i,"data-testid":"review-changes-button",ref:n,children:I(F,{align:"center",children:[s(M,{marginRight:o?0:3,children:s(T,{children:s(Al,{status:a})})}),!o&&s(T,{size:1,weight:"medium",children:d==null?void 0:d.text})]})})}):null}),Fl=Pe.memo(Ll),Bl=1e3,zl=3e3,Wl=c.memo(function(){var e;const{changesOpen:n,documentId:o,documentType:a,editState:r,onHistoryClose:i,onHistoryOpen:l,historyController:u,value:d}=W(),p=er(o,a),h=d==null?void 0:d._updatedAt,b=(e=r==null?void 0:r.published)==null?void 0:e._updatedAt,m=u.onOlderRevision(),x=!!(r!=null&&r.liveEdit),P=!!(r!=null&&r.published),E=!!(r!=null&&r.draft),[y,_]=c.useState(null),w=Je(y),v=!w||(w==null?void 0:w.width)<300,[f,g]=c.useState(null);c.useEffect(()=>{if(f==="syncing"&&!p.isSyncing){const O=setTimeout(()=>g("saved"),Bl);return()=>clearTimeout(O)}if(f==="saved"){const O=setTimeout(()=>g(null),zl);return()=>clearTimeout(O)}},[f,h,p.isSyncing]),c.useLayoutEffect(()=>{g(null)},[o]),c.useLayoutEffect(()=>{p.isSyncing&&g("syncing")},[p.isSyncing,h]);const C=c.useMemo(()=>s(Fl,{lastUpdated:h,status:f||(E?"changes":void 0),onClick:n?i:l,disabled:m,selected:n,collapsed:v}),[E,n,i,l,h,m,f,v]),S=c.useMemo(()=>(x||P)&&s(M,{marginRight:1,children:s(Sl,{disabled:m,lastPublished:b,lastUpdated:h,liveEdit:x,collapsed:v})}),[v,b,h,x,P,m]);return I(F,{align:"center","data-ui":"DocumentSparkline",ref:_,children:[S,I(F,{align:"center",flex:1,children:[C,!v&&s(M,{marginLeft:3,children:s(xl,{})})]})]})}),Vl=B(M)(qn||(qn=L([`
  min-width: 10em;
  max-width: 16em;
`])));function Ul(t){const{actionsBoxRef:e}=t,{badges:n,historyController:o}=W(),a=o.onOlderRevision();return c.useMemo(()=>s(M,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:I(F,{align:"center",children:[s(M,{flex:[1,2],children:n&&s(Wl,{})}),s(Vl,{flex:1,marginLeft:[1,3],ref:e,children:a?s(bl,{}):s(vl,{})})]})}),[e,n,a])}function Hl(t){const{actionsBoxElement:e,activeIndex:n,children:o,id:a,onActionStart:r,onKeyDown:i,rootRef:l,states:u,...d}=t,p=u[n],h=c.useCallback(b=>{const m=u.filter(P=>P.shortcut&&Nt(P.shortcut,b)),x=m[0];if(m.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(x.shortcut,'"')),x&&!x.disabled&&x.onHandle){b.preventDefault(),x.onHandle(),r(u.indexOf(x));return}i&&i(b)},[r,i,u]);return I(Ye,{id:a,onKeyDown:h,tabIndex:-1,...d,ref:l,children:[o,p&&p.dialog&&s(Ut,{zOffset:"paneFooter",children:s(Kt,{dialog:p.dialog,referenceElement:e})})]})}const Xo=Pe.memo(t=>{const{actionsBoxElement:e,children:n,...o}=t,{actions:a,editState:r}=W(),[i,l]=c.useState(-1),u=c.useCallback(p=>{l(p)},[]),d=c.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!d||!a?null:s(Yt,{actionProps:d,actions:a,children:p=>{let{states:h}=p;return s(Hl,{...o,activeIndex:i,actionsBoxElement:e,onActionStart:u,states:h,children:n})}})});Xo.displayName="DocumentActionShortcuts";const ao=320,ro=600,io=320,so=["fixed","absolute"],Gl=B(tr)(Xn||(Xn=L([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),nu=c.memo(function(e){const{name:n}=qe();return s(yo,{name:e.pane.source||n,children:s($l,{...e})})});function $l(t){var e;const{pane:n,paneKey:o}=t,{resolveNewDocumentOptions:a}=qe().document,r=ke(),i=Yl(n.options,r.params),{documentType:l,isLoaded:u}=nr(i.id,i.type),d=c.useMemo(()=>a({type:"global"}),[a]),[p,h]=or({templateItems:d}),b=u&&!h,m=c.useMemo(()=>b&&l&&i.type!==l?Kl(t,i,l):t,[t,l,b,i]),{ReferenceChildLink:x,handleEditReference:P,groupIndex:E,routerPanesState:y}=r,_=((e=y[E+1])==null?void 0:e[0].params)||{},w=y.length,{parentRefPath:v}=_,f=c.useMemo(()=>v?{path:De(v),state:E>=w-1?"none":E>=w-2?"selected":"pressed"}:{path:[],state:"none"},[v,E,w]);return i.type==="*"&&!b?s(Te,{flex:2.5,minWidth:320,paneKey:o,title:"Loading document…"}):l?s(Vo,{...m,children:s(ar,{EditReferenceLinkComponent:x,onEditReference:P,initialValueTemplateItems:p,activePath:f,children:s(ql,{})})},l):s(Wo,{flex:2.5,minWidth:320,paneKey:o,title:s(z,{children:"The document was not found"}),children:s(ee,{space:4,children:I(T,{as:"p",children:["The document type is not defined, and a document with the ",s("code",{children:i.id})," ","identifier could not be found."]})})})}function Yl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=po();return c.useMemo(()=>{if(t.type&&t.type!=="*")return t;const o=t.template||e.template,a=o?n.find(i=>i.id===o):void 0,r=a==null?void 0:a.schemaType;return r?{...t,type:r}:t},[t,e.template,n])}function Kl(t,e,n){return{...t,pane:{...t.pane,options:{...e,type:n}}}}function ql(){const{changesOpen:t,documentType:e,onFocus:n,onPathOpen:o,onHistoryOpen:a,onKeyUp:r,inspectOpen:i,paneKey:l,schemaType:u,value:d}=W(),{features:p}=he(),{collapsed:h}=_o(),b=rr(),[m,x]=c.useState(null),[P,E]=c.useState(null),[y,_]=c.useState(null),[w,v]=c.useState(null),f=Je(P),g=f==null?void 0:f.height,C=c.useMemo(()=>s(cl,{footerHeight:g||null,isInspectOpen:i,rootElement:m,setDocumentPanelPortalElement:v}),[g,m,i]),S=c.useMemo(()=>s(Bt,{__unstable_elements:{documentPanelPortalElement:w},children:s(hn,{position:so,zOffset:b.portal,children:s(ir,{ref:E,children:s(Ul,{actionsBoxRef:_})})})}),[w,b.portal]),O=c.useMemo(()=>!p.reviewChanges||!t?null:s(zt,{element:m,children:s(jc,{})}),[t,p.reviewChanges,m]),D=c.useCallback(N=>{o(N),n(N)},[o,n]),R=c.useMemo(()=>u?I(z,{children:[s(hn,{position:so,zOffset:b.portal,children:s(F,{direction:"column",flex:1,height:h?void 0:"fill",children:I(Gl,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:a,onSetFocus:D,children:[C,O]})})}),S,s(rc,{})]}):s(Wo,{flex:2.5,minWidth:320,paneKey:l,title:I(z,{children:["Unknown document type: ",s("code",{children:e})]}),tone:"caution",children:I(ee,{space:4,children:[e&&I(T,{as:"p",children:["This document has the schema type ",s("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&s(T,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),ho]})}),[u,b.portal,h,t,a,D,C,O,S,l,e,d]),k=t?ro+io:ro,j=t?ao+io:ao;return s(Xo,{actionsBoxElement:y,currentMinWidth:k,"data-testid":"document-pane",flex:2.5,id:l,minWidth:j,onKeyUp:r,rootRef:x,children:R})}function Xl(){return s(de,{height:"fill",children:s(F,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:s(je,{width:0,children:s(de,{padding:4,radius:2,shadow:1,tone:"caution",children:I(F,{children:[s(M,{children:s(T,{size:1,children:s(Ft,{})})}),I(ee,{flex:1,marginLeft:3,space:3,children:[s(T,{as:"h1",size:1,weight:"bold",children:"No document types"}),s(T,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),s(T,{as:"p",muted:!0,size:1,children:s("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const Jl=B(ks)(Jn||(Jn=L([`
  min-height: 100%;
  min-width: 320px;
`]))),Ql=Nt("mod+s"),Zl=c.memo(function(e){let{onPaneChange:n}=e;var o;const{push:a}=Ke(),r=uo(),{layoutCollapsed:i,setLayoutCollapsed:l}=he(),{paneDataItems:u,resolvedPanes:d}=Us(),p=kt(c.useCallback(E=>typeof E.intent=="string",[])),[h,b]=c.useState(null),m=c.useCallback(()=>l(!0),[l]),x=c.useCallback(()=>l(!1),[l]);return c.useEffect(()=>{d.length&&n(d)},[n,d]),c.useEffect(()=>{const E=y=>{Ql(y)&&(y.preventDefault(),a({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[a]),((o=r._original)==null?void 0:o.types.some(sr))?I(Bt,{element:h||null,children:[I(Jl,{flex:1,height:i?void 0:"fill",minWidth:512,onCollapse:m,onExpand:x,children:[u.map(E=>{let{active:y,childItemId:_,groupIndex:w,itemId:v,key:f,pane:g,index:C,params:S,path:O,payload:D,siblingIndex:R,selected:k}=E;return s(c.Fragment,{children:g===St?s(Te,{paneKey:f,path:O,selected:k}):s(tc,{active:y,groupIndex:w,index:C,pane:g,childItemId:_,itemId:v,paneKey:f,params:S,payload:D,path:O,selected:k,siblingIndex:R})},"".concat(g===St?"loading":g.type,"-").concat(C))}),u.length<=1&&p&&s(Te,{paneKey:"intent-resolver"})]}),s("div",{"data-portal":"",ref:b})]}):s(Xl,{})});function eu(t){let{tool:{options:e}}=t;const{unstable_sources:n}=jr(),[o]=n,{source:a,defaultDocumentNode:r,structure:i}=e||{};c.useEffect(()=>(ft([]),()=>ft([])),[]);const[{error:l},u]=c.useState({error:null});return l?s(qs,{error:l}):s(Nr,{onCatch:u,children:s(yo,{name:a||o.name,children:I(Ar,{defaultDocumentNode:r,structure:i,children:[s(Zl,{onPaneChange:ft}),s($s,{})]})})})}var ou=Object.freeze({__proto__:null,default:eu});export{Cs as Delay,nu as DocumentPane,Vo as DocumentPaneProvider,ou as index,he as useDeskTool,Ac as useDeskToolSetting};
